{
  "$schema": "https://raw.githubusercontent.com/jopemachine/arvis-extension-validator/master/workflow-schema.json",
  "category": "Productivity",
  "creator": "jopemachine",
  "description": "Arvis evernote workflow",
  "defaultIcon": "icon.png",
  "name": "arvis-evernote-workflow",
  "readme": "Evernote workflow for Arvis \n\nhttps://github.com/jopemachine/arvis-evernote-workflow",
  "version": "0.0.4",
  "webAddress": "https://github.com/jopemachine/arvis-evernote-workflow#readme",
  "enabled": true,
  "commands": [
    {
      "type": "keyword",
      "command": "en > authtoken",
      "title": "en > authtoken",
      "subtitle": "Usage: en > authtoken {your api token}",
      "argType": "required",
      "actions": [
        {
          "modifiers": "normal",
          "type": "script",
          "script": "node auth.js '{query}'",
          "actions": [
            {
              "modifiers": "normal",
              "type": "cond",
              "if": {
                "cond": "new RegExp(\".*error.*\").test({query})",
                "actions": {
                  "then": [
                    {
                      "modifiers": "normal",
                      "type": "notification",
                      "title": "Auth failed.",
                      "text": "Not a valid token."
                    }
                  ],
                  "else": [
                    {
                      "modifiers": "normal",
                      "type": "notification",
                      "title": "Auth Complete Successfully!",
                      "text": "Proceed with saveCache for preview feature"
                    }
                  ]
                }
              }
            }
          ]
        }
      ]
    },
    {
      "type": "keyword",
      "command": "en > gettoken",
      "title": "en > gettoken",
      "subtitle": "Get OAuth token by your evernote account",
      "argType": "no",
      "actions": [
        {
          "modifiers": "normal",
          "type": "open",
          "target": "https://fk5dbjl4x5.execute-api.us-east-1.amazonaws.com/prod/auth"
        }
      ]
    },
    {
      "type": "keyword",
      "command": "en",
      "title": "en",
      "subtitle": "Open the Evernote.",
      "argType": "no",
      "actions": [
        {
          "modifiers": "normal",
          "type": "script",
          "script": "node writeLog.js \"en\""
        }
      ]
    },
    {
      "type": "keyword",
      "command": "en > clearcache",
      "title": "en > clearcache",
      "subtitle": "Clean all quicklook cache of alfred-evernote-workflow",
      "argType": "no",
      "actions": [
        {
          "modifiers": "normal",
          "type": "script",
          "script": "node deleteSearchContent.js",
          "actions": [
            {
              "modifiers": "normal",
              "type": "notification",
              "title": "Cache cleared",
              "text": ""
            }
          ]
        }
      ]
    },
    {
      "type": "keyword",
      "command": "en > clearlog",
      "title": "en > clearlog",
      "subtitle": "Clean all command logs",
      "argType": "no",
      "actions": [
        {
          "modifiers": "normal",
          "type": "script",
          "script": "node deleteCommandLog.js",
          "actions": [
            {
              "modifiers": "normal",
              "type": "notification",
              "title": "Command logs have been cleared",
              "text": ""
            }
          ]
        }
      ]
    },
    {
      "type": "keyword",
      "command": "__en > savecache",
      "title": "This work could take several minutes.",
      "subtitle": "You'll get a notification when the caching is complete.",
      "argType": "no",
      "actions": []
    },
    {
      "type": "keyword",
      "command": "en > help",
      "title": "en > help",
      "subtitle": "Please Read readme.md first",
      "argType": "no",
      "actions": [
        {
          "modifiers": "normal",
          "type": "open",
          "target": "https://github.com/jopemachine/alfred-evernote-workflow"
        }
      ]
    },
    {
      "type": "keyword",
      "command": "enc",
      "title": "enc",
      "subtitle": "Enter note content to create.",
      "argType": "required",
      "actions": [
        {
          "modifiers": "normal",
          "type": "script",
          "script": "node createNote.js '{query}'",
          "actions": [
            {
              "modifiers": "normal",
              "type": "notification",
              "title": "Note created!",
              "text": "The contents of the note have been copied to the clipboard."
            }
          ]
        }
      ]
    },
    {
      "type": "keyword",
      "command": "en > sync",
      "title": "en > sync",
      "subtitle": "Sync Evernote",
      "argType": "no",
      "actions": [
        {
          "modifiers": "normal",
          "type": "script",
          "script": "tell application \"Evernote\" to synchronize",
          "actions": [
            {
              "modifiers": "normal",
              "type": "notification",
              "title": "Evernote sync",
              "text": ""
            }
          ]
        },
        {
          "modifiers": "normal",
          "type": "script",
          "script": "node writeLog.js \"ensync\""
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "en > savecache",
      "title": "en > savecache",
      "subtitle": "",
      "scriptFilter": "node checkBeforeCaching.js",
      "runningSubtext": "",
      "withspace": false,
      "argType": "no",
      "actions": [
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"true\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "type": "script",
                  "script": "osascript saveCache.scpt",
                  "actions": [
                    {
                      "modifiers": "normal",
                      "type": "cond",
                      "if": {
                        "cond": "new RegExp(\".*1763.*\").test({query})",
                        "actions": {
                          "then": [
                            {
                              "modifiers": "normal",
                              "type": "notification",
                              "title": "Json format error",
                              "text": "After en > clearcache, carry out en > savecache. If the error is not gone, pls check the issue."
                            }
                          ],
                          "else": [
                            {
                              "modifiers": "normal",
                              "type": "notification",
                              "title": "Cache downloading complete!",
                              "text": "Note search is now available."
                            },
                            {
                              "modifiers": "normal",
                              "type": "script",
                              "script": "node setEnvAttr.js initialCaching true"
                            }
                          ]
                        }
                      }
                    }
                  ]
                }
              ],
              "else": [
                {
                  "modifiers": "normal",
                  "type": "notification",
                  "title": "Init error",
                  "text": ""
                }
              ]
            }
          }
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "enct",
      "title": "enct",
      "subtitle": "Select tag and enter note content to create.",
      "scriptFilter": "node searchTag.js '{query}' --create",
      "runningSubtext": "Tag searching...",
      "withspace": true,
      "argType": "optional",
      "actions": [
        {
          "modifiers": "normal",
          "type": "keyword",
          "subtitle": "Please enter note content to create.",
          "actions": [
            {
              "modifiers": "normal",
              "type": "script",
              "script": "node createNoteWithTag.js '{query}'",
              "actions": [
                {
                  "modifiers": "normal",
                  "type": "notification",
                  "title": "Note created!",
                  "text": "The contents of the note have been copied to the clipboard."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "enl",
      "title": "enl",
      "subtitle": "Retrieve your command logs",
      "scriptFilter": "node readLog.js {query}",
      "runningSubtext": "Fetching...",
      "withspace": true,
      "argType": "optional",
      "actions": [
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"\\$\\{en\\}\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "type": "keyword",
                  "keyword": "en",
                  "subtitle": "Open the Evernote.",
                  "actions": [
                    {
                      "modifiers": "normal",
                      "type": "script",
                      "script": "node writeLog.js \"en\""
                    }
                  ]
                }
              ],
              "else": []
            }
          }
        },
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"\\$\\{ensync\\}\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "type": "keyword",
                  "keyword": "en > sync",
                  "subtitle": "Sync Evernote",
                  "actions": [
                    {
                      "modifiers": "normal",
                      "type": "script",
                      "script": "tell application \"Evernote\" to synchronize",
                      "actions": [
                        {
                          "modifiers": "normal",
                          "type": "notification",
                          "title": "Evernote sync",
                          "text": ""
                        }
                      ]
                    },
                    {
                      "modifiers": "normal",
                      "type": "script",
                      "script": "node writeLog.js \"ensync\""
                    }
                  ]
                }
              ],
              "else": []
            }
          }
        },
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"\\$\\{entodo\\}\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "command": "entodo",
                  "title": "entodo",
                  "type": "scriptFilter",
                  "scriptFilter": "node searchNote.js '{query}' --todo",
                  "runningSubtext": "Searching...",
                  "withspace": true,
                  "actions": [
                    {
                      "modifiers": "fn",
                      "type": "script",
                      "script": "osascript openWebBrowser.scpt $1",
                      "actions": [
                        {
                          "modifiers": "normal",
                          "type": "notification",
                          "title": "Note not contained url!",
                          "text": "Source URL Error"
                        }
                      ]
                    },
                    {
                      "modifiers": "normal",
                      "type": "cond",
                      "if": {
                        "cond": "new RegExp(\"evernote:///view/.*\").test({query})",
                        "actions": {
                          "then": [
                            {
                              "modifiers": "normal",
                              "type": "script",
                              "script": "osascript openNoteWithNotelink.scpt {query}"
                            },
                            {
                              "modifiers": "normal",
                              "type": "script",
                              "script": "node writeLog.js \"noteopen {query}\""
                            }
                          ],
                          "else": [
                            {
                              "modifiers": "normal",
                              "type": "cond",
                              "if": {
                                "cond": "{query} == \"error\"",
                                "actions": {
                                  "then": [],
                                  "else": [
                                    {
                                      "modifiers": "normal",
                                      "type": "script",
                                      "script": "osascript openCollectionWindow.scpt {query}"
                                    }
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      }
                    }
                  ]
                }
              ],
              "else": []
            }
          }
        },
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"\\$\\{noteopen\\}.*\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "type": "script",
                  "script": "osascript openNoteWithNotelink.scpt {query}"
                }
              ],
              "else": []
            }
          }
        },
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"\\$\\{ens\\}.*\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "command": "ens",
                  "title": "ens",
                  "type": "scriptFilter",
                  "scriptFilter": "node searchNote.js '{query}'",
                  "runningSubtext": "Searching...",
                  "withspace": true,
                  "actions": [
                    {
                      "modifiers": "fn",
                      "type": "script",
                      "script": "osascript openWebBrowser.scpt $1",
                      "actions": [
                        {
                          "modifiers": "normal",
                          "type": "notification",
                          "title": "Note not contained url!",
                          "text": "Source URL Error"
                        }
                      ]
                    },
                    {
                      "modifiers": "normal",
                      "type": "cond",
                      "if": {
                        "cond": "new RegExp(\"evernote:///view/.*\").test({query})",
                        "actions": {
                          "then": [
                            {
                              "modifiers": "normal",
                              "type": "args",
                              "arg": "{var:notelink}",
                              "actions": [
                                {
                                  "modifiers": "normal",
                                  "type": "script",
                                  "script": "osascript openNoteWithNotelink.scpt {query}"
                                }
                              ]
                            },
                            {
                              "modifiers": "normal",
                              "type": "args",
                              "arg": "{var:notelink} {var:noteTitle}",
                              "actions": [
                                {
                                  "modifiers": "normal",
                                  "type": "script",
                                  "script": "node writeLog.js \"noteopen {query}\""
                                }
                              ]
                            }
                          ],
                          "else": [
                            {
                              "modifiers": "normal",
                              "type": "cond",
                              "if": {
                                "cond": "{query} == \"error\"",
                                "actions": {
                                  "then": [
                                    {
                                      "modifiers": "normal",
                                      "type": "notification",
                                      "title": "Error occured",
                                      "text": ""
                                    }
                                  ],
                                  "else": [
                                    {
                                      "modifiers": "normal",
                                      "type": "script",
                                      "script": "osascript openCollectionWindow.scpt {query}"
                                    }
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      }
                    }
                  ]
                }
              ],
              "else": []
            }
          }
        },
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"\\$\\{enn\\}.*\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "command": "enn",
                  "title": "enn",
                  "type": "scriptFilter",
                  "scriptFilter": "node searchNote.js '{query}' --trash",
                  "runningSubtext": "Searching...",
                  "withspace": true,
                  "actions": [
                    {
                      "modifiers": "normal",
                      "type": "script",
                      "script": "osascript openNoteByBrowser.scpt {query}"
                    }
                  ]
                }
              ],
              "else": []
            }
          }
        },
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"\\$\\{enu\\}.*\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "command": "enu",
                  "title": "enu",
                  "type": "scriptFilter",
                  "scriptFilter": "node searchNote.js '{query}' --sourceurl",
                  "runningSubtext": "Searching notes by URL",
                  "withspace": true,
                  "actions": [
                    {
                      "modifiers": "fn",
                      "type": "script",
                      "script": "osascript openWebBrowser.scpt '{query}'",
                      "actions": [
                        {
                          "modifiers": "normal",
                          "type": "notification",
                          "title": "Note not contained url",
                          "text": "Source URL Error"
                        }
                      ]
                    },
                    {
                      "modifiers": "normal",
                      "type": "cond",
                      "if": {
                        "cond": "new RegExp(\"evernote:///view/.*\").test({query})",
                        "actions": {
                          "then": [
                            {
                              "modifiers": "normal",
                              "type": "args",
                              "arg": "{var:notelink}",
                              "actions": [
                                {
                                  "modifiers": "normal",
                                  "type": "script",
                                  "script": "osascript openNoteWithNotelink.scpt $1"
                                }
                              ]
                            },
                            {
                              "modifiers": "normal",
                              "type": "args",
                              "arg": "{var:notelink} {var:noteTitle}",
                              "actions": [
                                {
                                  "modifiers": "normal",
                                  "type": "script",
                                  "script": "node writeLog.js \"noteopen {query}\""
                                }
                              ]
                            }
                          ],
                          "else": [
                            {
                              "modifiers": "normal",
                              "type": "cond",
                              "if": {
                                "cond": "{query} == \"error\"",
                                "actions": {
                                  "then": [
                                    {
                                      "modifiers": "normal",
                                      "type": "notification",
                                      "title": "Error occured",
                                      "text": ""
                                    }
                                  ],
                                  "else": [
                                    {
                                      "modifiers": "normal",
                                      "type": "script",
                                      "script": "osascript openCollectionWindow.scpt {query}"
                                    }
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      }
                    }
                  ]
                }
              ],
              "else": []
            }
          }
        },
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"\\$\\{enr\\}.*\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "command": "enr",
                  "title": "enr",
                  "type": "scriptFilter",
                  "scriptFilter": "node searchNote.js '{query}' --reminder",
                  "runningSubtext": "Searching notes with reminder",
                  "withspace": true,
                  "actions": [
                    {
                      "modifiers": "fn",
                      "type": "script",
                      "script": "osascript openWebBrowser.scpt $1",
                      "actions": [
                        {
                          "modifiers": "normal",
                          "type": "notification",
                          "title": "Note not contained url",
                          "text": "Source URL Error"
                        }
                      ]
                    },
                    {
                      "modifiers": "normal",
                      "type": "cond",
                      "if": {
                        "cond": "new RegExp(\"evernote:///view/.*\").test({query})",
                        "actions": {
                          "then": [
                            {
                              "modifiers": "normal",
                              "type": "args",
                              "arg": "{var:notelink} {var:noteTitle}",
                              "actions": [
                                {
                                  "modifiers": "normal",
                                  "type": "script",
                                  "script": "node writeLog.js \"noteopen {query}\""
                                }
                              ]
                            },
                            {
                              "modifiers": "normal",
                              "type": "args",
                              "arg": "{var:notelink}",
                              "actions": [
                                {
                                  "modifiers": "normal",
                                  "type": "script",
                                  "script": "osascript openNoteWithNotelink.scpt $1"
                                }
                              ]
                            }
                          ],
                          "else": [
                            {
                              "modifiers": "normal",
                              "type": "cond",
                              "if": {
                                "cond": "{query} == \"error\"",
                                "actions": {
                                  "then": [
                                    {
                                      "modifiers": "normal",
                                      "type": "notification",
                                      "title": "Error occured",
                                      "text": ""
                                    }
                                  ],
                                  "else": [
                                    {
                                      "modifiers": "normal",
                                      "type": "script",
                                      "script": "osascript openCollectionWindow.scpt {query}"
                                    }
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      }
                    }
                  ]
                }
              ],
              "else": []
            }
          }
        },
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"\\$\\{eni\\}.*\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "command": "eni",
                  "title": "eni",
                  "type": "scriptFilter",
                  "scriptFilter": "node searchNote.js '{query}' --intitle",
                  "runningSubtext": "Searching...",
                  "withspace": true,
                  "actions": [
                    {
                      "modifiers": "fn",
                      "type": "script",
                      "script": "osascript openWebBrowser.scpt $1",
                      "actions": [
                        {
                          "modifiers": "normal",
                          "type": "notification",
                          "title": "Note not contained url",
                          "text": "Source URL Error"
                        }
                      ]
                    },
                    {
                      "modifiers": "normal",
                      "type": "cond",
                      "if": {
                        "cond": "new RegExp(\"evernote:///view/.*\").test({query})",
                        "actions": {
                          "then": [
                            {
                              "modifiers": "normal",
                              "type": "args",
                              "arg": "{var:notelink} {var:noteTitle}",
                              "actions": [
                                {
                                  "modifiers": "normal",
                                  "type": "script",
                                  "script": "node writeLog.js \"noteopen {query}\""
                                }
                              ]
                            },
                            {
                              "modifiers": "normal",
                              "type": "args",
                              "arg": "{var:notelink}",
                              "actions": [
                                {
                                  "modifiers": "normal",
                                  "type": "script",
                                  "script": "osascript openNoteWithNotelink.scpt $1"
                                }
                              ]
                            }
                          ],
                          "else": [
                            {
                              "modifiers": "normal",
                              "type": "cond",
                              "if": {
                                "cond": "{query} == \"error\"",
                                "actions": {
                                  "then": [
                                    {
                                      "modifiers": "normal",
                                      "type": "notification",
                                      "title": "Error occured",
                                      "text": ""
                                    }
                                  ],
                                  "else": [
                                    {
                                      "modifiers": "normal",
                                      "type": "script",
                                      "script": "osascript openCollectionWindow.scpt {query}"
                                    }
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      }
                    }
                  ]
                }
              ],
              "else": []
            }
          }
        },
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"\\$\\{ent\\}.*\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "command": "ens",
                  "title": "ens",
                  "type": "scriptFilter",
                  "scriptFilter": "node searchNote.js '{query}'",
                  "runningSubtext": "Searching...",
                  "withspace": true,
                  "actions": [
                    {
                      "modifiers": "fn",
                      "type": "script",
                      "script": "osascript openWebBrowser.scpt $1",
                      "actions": [
                        {
                          "modifiers": "normal",
                          "type": "notification",
                          "title": "Note not contained url!",
                          "text": "Source URL Error"
                        }
                      ]
                    },
                    {
                      "modifiers": "normal",
                      "type": "cond",
                      "if": {
                        "cond": "new RegExp(\"evernote:///view/.*\").test({query})",
                        "actions": {
                          "then": [
                            {
                              "modifiers": "normal",
                              "type": "args",
                              "arg": "{var:notelink}",
                              "actions": [
                                {
                                  "modifiers": "normal",
                                  "type": "script",
                                  "script": "osascript openNoteWithNotelink.scpt {query}"
                                }
                              ]
                            },
                            {
                              "modifiers": "normal",
                              "type": "args",
                              "arg": "{var:notelink} {var:noteTitle}",
                              "actions": [
                                {
                                  "modifiers": "normal",
                                  "type": "script",
                                  "script": "node writeLog.js \"noteopen {query}\""
                                }
                              ]
                            }
                          ],
                          "else": [
                            {
                              "modifiers": "normal",
                              "type": "cond",
                              "if": {
                                "cond": "{query} == \"error\"",
                                "actions": {
                                  "then": [
                                    {
                                      "modifiers": "normal",
                                      "type": "notification",
                                      "title": "Error occured",
                                      "text": ""
                                    }
                                  ],
                                  "else": [
                                    {
                                      "modifiers": "normal",
                                      "type": "script",
                                      "script": "osascript openCollectionWindow.scpt {query}"
                                    }
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      }
                    }
                  ]
                }
              ],
              "else": []
            }
          }
        },
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"\\$\\{enb\\}.*\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "command": "ens",
                  "title": "ens",
                  "type": "scriptFilter",
                  "scriptFilter": "node searchNote.js '{query}'",
                  "runningSubtext": "Searching...",
                  "withspace": true,
                  "actions": [
                    {
                      "modifiers": "fn",
                      "type": "script",
                      "script": "osascript openWebBrowser.scpt $1",
                      "actions": [
                        {
                          "modifiers": "normal",
                          "type": "notification",
                          "title": "Note not contained url!",
                          "text": "Source URL Error"
                        }
                      ]
                    },
                    {
                      "modifiers": "normal",
                      "type": "cond",
                      "if": {
                        "cond": "new RegExp(\"evernote:///view/.*\").test({query})",
                        "actions": {
                          "then": [
                            {
                              "modifiers": "normal",
                              "type": "args",
                              "arg": "{var:notelink}",
                              "actions": [
                                {
                                  "modifiers": "normal",
                                  "type": "script",
                                  "script": "osascript openNoteWithNotelink.scpt {query}"
                                }
                              ]
                            },
                            {
                              "modifiers": "normal",
                              "type": "args",
                              "arg": "{var:notelink} {var:noteTitle}",
                              "actions": [
                                {
                                  "modifiers": "normal",
                                  "type": "script",
                                  "script": "node writeLog.js \"noteopen {query}\""
                                }
                              ]
                            }
                          ],
                          "else": [
                            {
                              "modifiers": "normal",
                              "type": "cond",
                              "if": {
                                "cond": "{query} == \"error\"",
                                "actions": {
                                  "then": [
                                    {
                                      "modifiers": "normal",
                                      "type": "notification",
                                      "title": "Error occured",
                                      "text": ""
                                    }
                                  ],
                                  "else": [
                                    {
                                      "modifiers": "normal",
                                      "type": "script",
                                      "script": "osascript openCollectionWindow.scpt {query}"
                                    }
                                  ]
                                }
                              }
                            }
                          ]
                        }
                      }
                    }
                  ]
                }
              ],
              "else": []
            }
          }
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "entodo",
      "title": "entodo",
      "subtitle": "Search for notes with check boxes.",
      "scriptFilter": "node searchNote.js '{query}' --todo",
      "runningSubtext": "Searching...",
      "withspace": true,
      "argType": "optional",
      "actions": [
        {
          "modifiers": "fn",
          "type": "script",
          "script": "osascript openWebBrowser.scpt $1",
          "actions": [
            {
              "modifiers": "normal",
              "type": "notification",
              "title": "Note not contained url!",
              "text": "Source URL Error"
            }
          ]
        },
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"evernote:///view/.*\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "type": "script",
                  "script": "osascript openNoteWithNotelink.scpt {query}"
                },
                {
                  "modifiers": "normal",
                  "type": "script",
                  "script": "node writeLog.js \"noteopen {query}\""
                }
              ],
              "else": [
                {
                  "modifiers": "normal",
                  "type": "cond",
                  "if": {
                    "cond": "{query} == \"error\"",
                    "actions": {
                      "then": [],
                      "else": [
                        {
                          "modifiers": "normal",
                          "type": "script",
                          "script": "osascript openCollectionWindow.scpt {query}"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          }
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "encl",
      "title": "encl",
      "subtitle": "Create a note with the contents of the clipboard.",
      "scriptFilter": "node clipCheck.js {\"clip\"}",
      "runningSubtext": "",
      "withspace": false,
      "argType": "no",
      "actions": [
        {
          "modifiers": "normal",
          "type": "script",
          "script": "node clip.js",
          "actions": [
            {
              "modifiers": "normal",
              "type": "notification",
              "title": "Clip complete",
              "text": "The text on the clipboard is made into a note."
            }
          ]
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "enclo",
      "title": "enclo",
      "subtitle": "Create a note with the contents of the clipboard and open",
      "scriptFilter": "node clipCheck.js {\"oclip\"}",
      "runningSubtext": "",
      "withspace": false,
      "argType": "no",
      "actions": [
        {
          "modifiers": "normal",
          "type": "script",
          "script": "node clipAndOpen.js"
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "enclf",
      "title": "enclf",
      "subtitle": "Create a note with copied files",
      "scriptFilter": "node clipCheck.js {\"fclip\"}",
      "runningSubtext": "",
      "withspace": false,
      "argType": "no",
      "actions": [
        {
          "modifiers": "normal",
          "type": "script",
          "script": "osascript clipNoteWithFiles.scpt"
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "ens",
      "title": "ens",
      "subtitle": "Search for notes.",
      "scriptFilter": "node searchNote.js '{query}'",
      "runningSubtext": "Searching...",
      "withspace": true,
      "argType": "optional",
      "actions": [
        {
          "modifiers": "fn",
          "type": "script",
          "script": "osascript openWebBrowser.scpt $1",
          "actions": [
            {
              "modifiers": "normal",
              "type": "notification",
              "title": "Note not contained url!",
              "text": "Source URL Error"
            }
          ]
        },
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"evernote:///view/.*\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "type": "args",
                  "arg": "{var:notelink}",
                  "actions": [
                    {
                      "modifiers": "normal",
                      "type": "script",
                      "script": "osascript openNoteWithNotelink.scpt {query}"
                    }
                  ]
                },
                {
                  "modifiers": "normal",
                  "type": "args",
                  "arg": "{var:notelink} {var:noteTitle}",
                  "actions": [
                    {
                      "modifiers": "normal",
                      "type": "script",
                      "script": "node writeLog.js \"noteopen {query}\""
                    }
                  ]
                }
              ],
              "else": [
                {
                  "modifiers": "normal",
                  "type": "cond",
                  "if": {
                    "cond": "{query} == \"error\"",
                    "actions": {
                      "then": [
                        {
                          "modifiers": "normal",
                          "type": "notification",
                          "title": "Error occured",
                          "text": ""
                        }
                      ],
                      "else": [
                        {
                          "modifiers": "normal",
                          "type": "script",
                          "script": "osascript openCollectionWindow.scpt {query}"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          }
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "enn",
      "title": "enn",
      "subtitle": "Search Note in Trash bin",
      "scriptFilter": "node searchNote.js '{query}' --trash",
      "runningSubtext": "Searching...",
      "withspace": true,
      "argType": "optional",
      "actions": [
        {
          "modifiers": "normal",
          "type": "script",
          "script": "osascript openNoteByBrowser.scpt {query}"
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "enu",
      "title": "enu",
      "subtitle": "Search Note by URL",
      "scriptFilter": "node searchNote.js '{query}' --sourceurl",
      "runningSubtext": "Searching notes by URL",
      "withspace": true,
      "argType": "optional",
      "actions": [
        {
          "modifiers": "fn",
          "type": "script",
          "script": "osascript openWebBrowser.scpt '{query}'",
          "actions": [
            {
              "modifiers": "normal",
              "type": "notification",
              "title": "Note not contained url",
              "text": "Source URL Error"
            }
          ]
        },
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"evernote:///view/.*\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "type": "args",
                  "arg": "{var:notelink}",
                  "actions": [
                    {
                      "modifiers": "normal",
                      "type": "script",
                      "script": "osascript openNoteWithNotelink.scpt $1"
                    }
                  ]
                },
                {
                  "modifiers": "normal",
                  "type": "args",
                  "arg": "{var:notelink} {var:noteTitle}",
                  "actions": [
                    {
                      "modifiers": "normal",
                      "type": "script",
                      "script": "node writeLog.js \"noteopen {query}\""
                    }
                  ]
                }
              ],
              "else": [
                {
                  "modifiers": "normal",
                  "type": "cond",
                  "if": {
                    "cond": "{query} == \"error\"",
                    "actions": {
                      "then": [
                        {
                          "modifiers": "normal",
                          "type": "notification",
                          "title": "Error occured",
                          "text": ""
                        }
                      ],
                      "else": [
                        {
                          "modifiers": "normal",
                          "type": "script",
                          "script": "osascript openCollectionWindow.scpt {query}"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          }
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "enr",
      "title": "enr",
      "subtitle": "Search Note with Reminder",
      "scriptFilter": "node searchNote.js '{query}' --reminder",
      "runningSubtext": "Searching notes with reminder",
      "withspace": true,
      "argType": "optional",
      "actions": [
        {
          "modifiers": "fn",
          "type": "script",
          "script": "osascript openWebBrowser.scpt $1",
          "actions": [
            {
              "modifiers": "normal",
              "type": "notification",
              "title": "Note not contained url",
              "text": "Source URL Error"
            }
          ]
        },
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"evernote:///view/.*\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "type": "args",
                  "arg": "{var:notelink} {var:noteTitle}",
                  "actions": [
                    {
                      "modifiers": "normal",
                      "type": "script",
                      "script": "node writeLog.js \"noteopen {query}\""
                    }
                  ]
                },
                {
                  "modifiers": "normal",
                  "type": "args",
                  "arg": "{var:notelink}",
                  "actions": [
                    {
                      "modifiers": "normal",
                      "type": "script",
                      "script": "osascript openNoteWithNotelink.scpt $1"
                    }
                  ]
                }
              ],
              "else": [
                {
                  "modifiers": "normal",
                  "type": "cond",
                  "if": {
                    "cond": "{query} == \"error\"",
                    "actions": {
                      "then": [
                        {
                          "modifiers": "normal",
                          "type": "notification",
                          "title": "Error occured",
                          "text": ""
                        }
                      ],
                      "else": [
                        {
                          "modifiers": "normal",
                          "type": "script",
                          "script": "osascript openCollectionWindow.scpt {query}"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          }
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "eni",
      "title": "eni",
      "subtitle": "Search Note by Intitle",
      "scriptFilter": "node searchNote.js '{query}' --intitle",
      "runningSubtext": "Searching...",
      "withspace": true,
      "argType": "optional",
      "actions": [
        {
          "modifiers": "fn",
          "type": "script",
          "script": "osascript openWebBrowser.scpt $1",
          "actions": [
            {
              "modifiers": "normal",
              "type": "notification",
              "title": "Note not contained url",
              "text": "Source URL Error"
            }
          ]
        },
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"evernote:///view/.*\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "type": "args",
                  "arg": "{var:notelink} {var:noteTitle}",
                  "actions": [
                    {
                      "modifiers": "normal",
                      "type": "script",
                      "script": "node writeLog.js \"noteopen {query}\""
                    }
                  ]
                },
                {
                  "modifiers": "normal",
                  "type": "args",
                  "arg": "{var:notelink}",
                  "actions": [
                    {
                      "modifiers": "normal",
                      "type": "script",
                      "script": "osascript openNoteWithNotelink.scpt $1"
                    }
                  ]
                }
              ],
              "else": [
                {
                  "modifiers": "normal",
                  "type": "cond",
                  "if": {
                    "cond": "{query} == \"error\"",
                    "actions": {
                      "then": [
                        {
                          "modifiers": "normal",
                          "type": "notification",
                          "title": "Error occured",
                          "text": ""
                        }
                      ],
                      "else": [
                        {
                          "modifiers": "normal",
                          "type": "script",
                          "script": "osascript openCollectionWindow.scpt {query}"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          }
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "enf",
      "title": "enf",
      "subtitle": "Search Note by file extension",
      "scriptFilter": "node searchNote.js '{query}' --fileExtension",
      "runningSubtext": "Searching note with file extension...",
      "withspace": true,
      "argType": "optional",
      "actions": [
        {
          "modifiers": "fn",
          "type": "script",
          "script": "osascript openWebBrowser.scpt $1",
          "actions": [
            {
              "modifiers": "normal",
              "type": "notification",
              "title": "Note not contained url",
              "text": "Source URL Error"
            }
          ]
        },
        {
          "modifiers": "normal",
          "type": "cond",
          "if": {
            "cond": "new RegExp(\"evernote:///view/.*\").test({query})",
            "actions": {
              "then": [
                {
                  "modifiers": "normal",
                  "type": "args",
                  "arg": "{var:notelink} {var:noteTitle}",
                  "actions": [
                    {
                      "modifiers": "normal",
                      "type": "script",
                      "script": "node writeLog.js \"noteopen {query}\""
                    }
                  ]
                },
                {
                  "modifiers": "normal",
                  "type": "args",
                  "arg": "{var:notelink}",
                  "actions": [
                    {
                      "modifiers": "normal",
                      "type": "script",
                      "script": "osascript openNoteWithNotelink.scpt $1"
                    }
                  ]
                }
              ],
              "else": [
                {
                  "modifiers": "normal",
                  "type": "cond",
                  "if": {
                    "cond": "{query} == \"error\"",
                    "actions": {
                      "then": [
                        {
                          "modifiers": "normal",
                          "type": "notification",
                          "title": "Error occured",
                          "text": ""
                        }
                      ],
                      "else": [
                        {
                          "modifiers": "normal",
                          "type": "script",
                          "script": "osascript openCollectionWindow.scpt {query}"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          }
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "ent",
      "title": "ent",
      "subtitle": "Search Tag..",
      "scriptFilter": "node searchTag.js \"$1\"",
      "runningSubtext": "Tag searching...",
      "withspace": true,
      "argType": "optional",
      "actions": [
        {
          "modifiers": "cmd",
          "type": "script",
          "script": "var evernote = Application('Evernote');\nevernote.activate();\nevernote.openCollectionWindow({withQueryString: '{query}'});"
        },
        {
          "modifiers": "cmd",
          "type": "script",
          "script": "node writeLog.js \"ent {query}\""
        },
        {
          "modifiers": "normal",
          "type": "script",
          "script": "node writeLog.js \"ent {query}\""
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "enb",
      "title": "enb",
      "subtitle": "Search Note..",
      "scriptFilter": "node searchNotebook.js '{query}' --notebook",
      "runningSubtext": "Searching notebook..",
      "withspace": true,
      "argType": "optional",
      "actions": [
        {
          "modifiers": "cmd",
          "type": "script",
          "script": "node writeLog.js \"enb {query}\""
        },
        {
          "modifiers": "cmd",
          "type": "script",
          "script": "var evernote = Application('Evernote');\nevernote.activate();\nevernote.openCollectionWindow({withQueryString: 'notebook:' + '\"{query}\"'});"
        },
        {
          "modifiers": "normal",
          "type": "script",
          "script": "node writeLog.js \"enb {query}\""
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "enx",
      "title": "enx",
      "subtitle": "Select Note to export",
      "scriptFilter": "node searchNote.js '{query}'",
      "runningSubtext": "Export selected note...",
      "withspace": true,
      "argType": "optional",
      "actions": [
        {
          "modifiers": "normal",
          "type": "script",
          "script": "osascript noteExport.scpt $1"
        }
      ]
    },
    {
      "type": "scriptFilter",
      "command": "enap",
      "title": "enap",
      "subtitle": "Append data to selected note.",
      "scriptFilter": "node searchNote.js '{query}' --append",
      "runningSubtext": "Searching...",
      "withspace": true,
      "argType": "optional",
      "actions": [
        {
          "modifiers": "normal",
          "type": "args",
          "arg": "",
          "actions": [
            {
              "modifiers": "normal",
              "type": "keyword",
              "subtitle": "",
              "actions": [
                {
                  "modifiers": "normal",
                  "type": "args",
                  "arg": "{var:notelink} {query}",
                  "actions": [
                    {
                      "modifiers": "normal",
                      "type": "script",
                      "script": "node appendNote.js '{query}'",
                      "actions": [
                        {
                          "modifiers": "normal",
                          "type": "notification",
                          "title": "Content appended.",
                          "text": ""
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
